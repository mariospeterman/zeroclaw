:root {
  color-scheme: light;
  --background: #f6f5f1;
  --foreground: #11151b;
  --heading: #0d1117;
  --muted: #5d6774;
  --accent: #2d5be3;
  --accent-2: #2f8fb0;
  --panel: rgba(15, 20, 26, 0.04);
  --panel-strong: rgba(15, 20, 26, 0.08);
  --border: rgba(15, 20, 26, 0.12);
  --surface-1: #ffffff;
  --surface-2: #f1f3f7;
  --surface-3: #e9edf3;
  --input-bg: #ffffff;
  --input-border: #c8d1de;
  --btn-primary-bg: #2d5be3;
  --btn-primary-bg-hover: #2348bb;
  --btn-primary-fg: #ffffff;
  --btn-secondary-bg: #eef2f8;
  --btn-secondary-bg-hover: #dde5f2;
  --btn-secondary-fg: #11151b;
  --btn-disabled-bg: #d3dce8;
  --btn-disabled-fg: #526174;
  --radius-sm: 12px;
  --radius-md: 18px;
  --radius-lg: 24px;
  --shadow-soft: 0 30px 72px rgb(14 21 29 / 12%);
  --shadow-panel: 0 18px 52px rgb(14 21 29 / 9%);
  --max-content: 72rem;
}

body[data-theme="dark"] {
  color-scheme: dark;
  --background: #0b0f14;
  --foreground: #f4f4f0;
  --heading: #f6f1e8;
  --muted: #b9c2cd;
  --accent: #5aa0ff;
  --accent-2: #7db6a8;
  --panel: rgba(255, 255, 255, 0.05);
  --panel-strong: rgba(255, 255, 255, 0.1);
  --border: rgba(255, 255, 255, 0.12);
  --surface-1: #111821;
  --surface-2: #17212d;
  --surface-3: #1d2836;
  --input-bg: #0f1620;
  --input-border: #3a4a61;
  --btn-primary-bg: #5aa0ff;
  --btn-primary-bg-hover: #3f82dc;
  --btn-primary-fg: #0d1117;
  --btn-secondary-bg: #1d2a3a;
  --btn-secondary-bg-hover: #27384d;
  --btn-secondary-fg: #f4f4f0;
  --btn-disabled-bg: #243246;
  --btn-disabled-fg: #9fb0c6;
  --shadow-soft: 0 34px 80px rgb(0 0 0 / 42%);
  --shadow-panel: 0 22px 66px rgb(0 0 0 / 28%);
}

* {
  box-sizing: border-box;
}

html,
body {
  min-height: 100%;
}

body {
  margin: 0;
  font-family: "Manrope", "Segoe UI", sans-serif;
  font-size: 15px;
  line-height: 1.6;
  color: var(--foreground);
  background:
    radial-gradient(circle at 12% -10%, rgb(45 91 227 / 14%), transparent 46%),
    radial-gradient(circle at 86% -16%, rgb(47 143 176 / 12%), transparent 42%),
    linear-gradient(180deg, var(--background), var(--background));
}

body::before,
body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -1;
}

body::before {
  background:
    radial-gradient(circle at 20% 8%, rgb(45 91 227 / 12%), transparent 42%),
    radial-gradient(circle at 80% 4%, rgb(47 143 176 / 10%), transparent 38%);
}

body::after {
  opacity: 0.26;
  background-image:
    linear-gradient(to right, color-mix(in srgb, var(--border), transparent 45%) 1px, transparent 1px),
    linear-gradient(to bottom, color-mix(in srgb, var(--border), transparent 45%) 1px, transparent 1px);
  background-size: 36px 36px;
  mask-image: linear-gradient(to bottom, rgb(0 0 0 / 22%), transparent 55%);
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.shell {
  width: min(var(--max-content), calc(100vw - 2rem));
  min-height: 100dvh;
  margin: 0 auto;
  padding: 1.2rem 0 1.4rem;
  display: grid;
  grid-template-rows: auto auto minmax(0, 1fr) auto;
  gap: 0.9rem;
}

.topbar,
.setup-stepper,
.panel,
.dock,
.mobile-nav {
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  background: linear-gradient(145deg, var(--surface-1), var(--surface-2));
  box-shadow: var(--shadow-panel);
  backdrop-filter: blur(10px);
}

.topbar,
.setup-stepper,
.panel,
.dock,
.mobile-nav {
  animation: reveal-up 0.35s ease both;
}

.topbar {
  padding: 1rem 1.1rem;
  display: grid;
  grid-template-columns: 1.15fr 0.85fr 1.7fr;
  grid-template-areas:
    "left center right"
    "hud hud hud";
  gap: 1rem;
  align-items: center;
}

.topbar-left {
  grid-area: left;
}

.topbar-center {
  grid-area: center;
}

.topbar-right {
  grid-area: right;
}

.eyebrow {
  margin: 0;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: var(--accent);
  font-weight: 700;
}

h1,
h2,
h3,
h4 {
  margin: 0;
  font-family: "Fraunces", "Times New Roman", serif;
  color: var(--heading);
  letter-spacing: -0.01em;
  line-height: 1.18;
}

.topbar h1 {
  margin: 0.14rem 0 0.22rem;
  font-size: clamp(1.65rem, 2.15vw, 2rem);
  font-weight: 620;
}

.topbar-left > p:last-child,
.panel-note,
.state-meta,
.topbar-center,
.topbar-right {
  color: var(--muted);
}

.topbar-left > p:last-child {
  margin: 0;
  font-size: 0.95rem;
}

.topbar-center {
  display: grid;
  justify-items: center;
  gap: 0.28rem;
}

.state-pill {
  display: inline-flex;
  justify-content: center;
  min-width: 156px;
  padding: 0.3rem 0.86rem;
  border-radius: 999px;
  border: 1px solid var(--accent);
  background: color-mix(in srgb, var(--accent), transparent 84%);
  color: var(--heading);
  font-weight: 700;
  letter-spacing: 0.02em;
}

.state-meta {
  font-size: 0.82rem;
}

.topbar-right {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-end;
  align-items: center;
  gap: 0.42rem;
}

.profile-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.52rem;
  padding: 0.24rem 0.44rem;
  border: 1px solid var(--border);
  border-radius: 999px;
  background: var(--surface-1);
  min-width: 170px;
}

.profile-avatar {
  width: 1.86rem;
  min-width: 1.86rem;
  height: 1.86rem;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--accent), transparent 48%);
  background: linear-gradient(140deg, color-mix(in srgb, var(--accent), transparent 70%), color-mix(in srgb, var(--accent-2), transparent 60%));
  color: var(--heading);
  display: inline-grid;
  place-items: center;
  font-weight: 700;
  font-size: 0.86rem;
}

.profile-copy {
  display: grid;
  line-height: 1.1;
}

.profile-copy strong {
  font-size: 0.82rem;
  color: var(--heading);
  max-width: 9rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.profile-copy small {
  margin-top: 0.1rem;
  font-size: 0.67rem;
  text-transform: uppercase;
  letter-spacing: 0.09em;
  color: var(--muted);
}

.profile-select {
  min-width: 150px;
  max-width: 220px;
  font-size: 0.8rem;
  padding-block: 0.38rem;
}

.icon-btn {
  width: 2.25rem;
  min-width: 2.25rem;
  height: 2.25rem;
  padding: 0;
  display: inline-grid;
  place-items: center;
  font-size: 1rem;
  line-height: 1;
}

.icon-btn[data-tip] {
  position: relative;
  overflow: visible;
}

.icon-btn[data-tip]::after {
  content: attr(data-tip);
  position: absolute;
  left: 50%;
  top: calc(100% + 7px);
  transform: translateX(-50%) translateY(-4px);
  opacity: 0;
  pointer-events: none;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--heading), transparent 8%);
  color: color-mix(in srgb, var(--background), white 22%);
  padding: 0.26rem 0.42rem;
  font-size: 0.66rem;
  letter-spacing: 0.04em;
  white-space: nowrap;
  z-index: 12;
  transition: opacity 0.14s ease, transform 0.14s ease;
}

.icon-btn[data-tip]:hover::after,
.icon-btn[data-tip]:focus-visible::after {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

.topbar-hud {
  grid-area: hud;
  border-top: 1px solid var(--border);
  padding-top: 0.62rem;
}

.global-hud-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
  margin-bottom: 0.45rem;
}

.global-hud-head .eyebrow {
  margin: 0;
}

.global-hud-grid {
  display: grid;
  grid-template-columns: repeat(9, minmax(0, 1fr));
  gap: 0.48rem;
}

.topbar-hud .metric {
  padding: 0.36rem 0.44rem;
  gap: 0.1rem;
}

.topbar-hud .metric span {
  font-size: 0.62rem;
  letter-spacing: 0.08em;
}

.topbar-hud .metric strong {
  font-size: 0.95rem;
}

.setup-stepper {
  padding: 0.56rem 0.82rem;
  display: grid;
  gap: 0.42rem;
}

.shell.is-stepper-compact .setup-stepper {
  padding-block: 0.5rem;
}

.setup-stepper.is-complete {
  display: none;
}

.stepper-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.7rem;
}

.stepper-progress {
  margin: 0;
  font-size: 0.8rem;
  color: var(--muted);
}

.gate-note {
  margin: 0;
  padding: 0.18rem 0.58rem;
  border: 1px solid color-mix(in srgb, var(--accent), transparent 45%);
  border-radius: 999px;
  background: color-mix(in srgb, var(--accent), transparent 88%);
  font-size: 0.74rem;
  letter-spacing: 0.05em;
  color: var(--heading);
}

.stepper-track {
  display: grid;
  grid-template-columns: repeat(6, minmax(0, 1fr));
  gap: 0.32rem;
}

.step-chip,
.mobile-nav button,
.mobile-nav a {
  font-size: 0.74rem;
  text-transform: uppercase;
  letter-spacing: 0.15em;
}

.step-chip {
  border: 1px solid var(--border);
  border-radius: 999px;
  color: var(--foreground);
  background: var(--surface-1);
  padding: 0.3rem 0.44rem;
}

.step-chip.is-active {
  color: var(--btn-primary-fg);
  border-color: color-mix(in srgb, var(--accent), #fff 22%);
  background: linear-gradient(130deg, var(--accent), var(--accent-2));
}

.step-chip.is-locked {
  opacity: 0.66;
  border-style: dashed;
}

.stepper-controls {
  display: flex;
  justify-content: flex-end;
  gap: 0.46rem;
}

.command-grid {
  min-height: 0;
  display: grid;
  align-items: start;
  gap: 0.9rem;
  grid-template-columns: minmax(0, 1fr) minmax(330px, 0.75fr);
}

.main-canvas {
  min-height: 0;
  display: grid;
  gap: 0.85rem;
  grid-template-columns: minmax(0, 1.25fr) minmax(260px, 0.75fr);
  overflow: auto;
  padding-right: 0.35rem;
  scrollbar-width: thin;
}

.flow-column,
.hud-column {
  display: grid;
  gap: 0.85rem;
  align-content: start;
}

.shell.is-focus-mode .command-grid {
  grid-template-columns: minmax(0, 1fr);
}

.shell.is-focus-mode .main-canvas {
  display: none;
}

.shell.is-focus-mode .dock {
  position: relative;
  top: auto;
  max-height: none;
  overflow: visible;
}

.shell.is-focus-mode .dock-body {
  overflow: visible;
  max-height: none;
}

.panel,
.dock {
  border-radius: var(--radius-md);
}

.panel {
  padding: 1rem;
}

.panel h2,
.dock-tab > h2 {
  margin-bottom: 0.5rem;
  font-size: clamp(1.55rem, 2.2vw, 2rem);
  font-weight: 610;
}

.dock-tab > h2 {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}

.panel h3,
.dock-tab h3 {
  margin: 0.56rem 0 0.34rem;
  font-size: 1.04rem;
  font-weight: 560;
}

.panel-note {
  margin: 0 0 0.7rem;
  font-size: 0.95rem;
  line-height: 1.65;
}

.field-hint {
  margin: 0;
  font-size: 0.82rem;
  color: var(--muted);
}

.field-hint a {
  color: var(--accent);
  text-decoration: underline;
  text-underline-offset: 2px;
}

.grid-form .field-hint {
  grid-column: 1 / -1;
}

.field {
  display: grid;
  gap: 0.28rem;
  align-content: start;
}

.field > span {
  font-size: 0.76rem;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
  font-weight: 650;
}

.field > small {
  color: var(--muted);
  font-size: 0.76rem;
  line-height: 1.45;
}

.field-inline {
  min-width: 190px;
}

.field-full {
  grid-column: 1 / -1;
}

.field-checkbox {
  align-items: center;
  grid-template-columns: auto 1fr;
  column-gap: 0.5rem;
  row-gap: 0.1rem;
}

.field-checkbox > input {
  width: 18px;
  height: 18px;
  margin: 0;
}

.field-checkbox > span {
  margin: 0;
}

.field-checkbox > small {
  grid-column: 2 / -1;
}

.setup-grid {
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}

.setup-grid-advanced {
  margin-top: 0.48rem;
}

.inline-details {
  grid-column: 1 / -1;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--surface-1);
  padding: 0.48rem 0.58rem;
}

.inline-details summary {
  cursor: pointer;
  color: var(--heading);
  font-weight: 650;
}

.form-actions {
  grid-column: 1 / -1;
  display: flex;
  justify-content: flex-end;
}

.metric-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.55rem;
}

.metric {
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--surface-2);
  padding: 0.58rem 0.64rem;
  display: grid;
  gap: 0.2rem;
}

.metric span {
  font-size: 0.76rem;
  letter-spacing: 0.09em;
  text-transform: uppercase;
  color: var(--muted);
}

.metric strong {
  font-size: 1.14rem;
  color: var(--heading);
}

.inline-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.48rem;
  align-items: center;
  margin-bottom: 0.64rem;
}

.stack {
  display: grid;
  gap: 0.54rem;
}

.grid-form {
  display: grid;
  gap: 0.54rem;
  grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
  margin-bottom: 0.66rem;
}

.cards {
  display: grid;
  gap: 0.54rem;
}

.card {
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--surface-2);
  padding: 0.6rem;
}

.card header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
  margin-bottom: 0.34rem;
}

.card p {
  margin: 0.22rem 0;
}

.pill {
  border-radius: 999px;
  border: 1px solid var(--border);
  padding: 0.13rem 0.5rem;
  font-size: 0.69rem;
  text-transform: uppercase;
  letter-spacing: 0.14em;
}

.pill.enabled {
  color: var(--foreground);
  border-color: var(--accent-2);
  background: color-mix(in srgb, var(--accent-2), transparent 82%);
}

.pill.disabled {
  color: var(--muted);
  border-color: var(--border);
  background: var(--surface-1);
}

.card-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
  margin-top: 0.44rem;
}

input,
textarea,
select,
button {
  font: inherit;
}

input,
textarea,
select {
  width: 100%;
  border: 1px solid var(--input-border);
  border-radius: 14px;
  background: var(--input-bg);
  color: var(--foreground);
  padding: 0.52rem 0.65rem;
}

select,
option {
  color: var(--foreground);
  background-color: var(--input-bg);
}

input::placeholder,
textarea::placeholder {
  color: color-mix(in srgb, var(--muted), transparent 12%);
}

input.input-readonly {
  background: color-mix(in srgb, var(--input-bg), var(--surface-2) 45%);
  color: var(--muted);
}

textarea {
  resize: vertical;
  min-height: 2.7rem;
}

.inline-row > input,
.inline-row > select {
  width: auto;
  flex: 1 1 180px;
}

.inline-row > label {
  width: auto;
}

.inline-row .field {
  flex: 1 1 220px;
}

.inline-row .field-inline {
  flex: 1 1 260px;
}

button {
  border: 1px solid transparent;
  border-radius: 999px;
  padding: 0.44rem 0.82rem;
  background: var(--btn-primary-bg);
  color: var(--btn-primary-fg);
  font-weight: 650;
  letter-spacing: 0.02em;
  cursor: pointer;
  transition: transform 0.18s ease, box-shadow 0.18s ease, filter 0.18s ease;
}

button:hover {
  transform: translateY(-1px);
  background: var(--btn-primary-bg-hover);
  box-shadow: 0 10px 24px rgb(45 91 227 / 22%);
}

button:disabled {
  opacity: 1;
  cursor: not-allowed;
  box-shadow: none;
  transform: none;
  background: var(--btn-disabled-bg);
  color: var(--btn-disabled-fg);
  border-color: transparent;
}

.secondary-btn {
  background: var(--btn-secondary-bg);
  color: var(--btn-secondary-fg);
  border-color: var(--input-border);
}

.secondary-btn:hover {
  background: var(--btn-secondary-bg-hover);
  box-shadow: 0 8px 20px rgb(15 20 26 / 12%);
}

pre {
  margin: 0;
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 0.64rem;
  background: var(--surface-3);
  overflow: auto;
  max-height: 280px;
  white-space: pre-wrap;
  word-break: break-word;
  font: 12px/1.55 "JetBrains Mono", "SFMono-Regular", Consolas, monospace;
}

code {
  font-family: "JetBrains Mono", "SFMono-Regular", Consolas, monospace;
  font-size: 0.88em;
}

.quick-links {
  display: flex;
  flex-wrap: wrap;
  gap: 0.46rem;
}

.quick-links a,
.billing-links a {
  padding: 0.24rem 0.66rem;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--surface-1);
  color: var(--foreground);
  text-decoration: none;
  font-size: 0.82rem;
  letter-spacing: 0.03em;
}

.dock {
  display: grid;
  gap: 0.62rem;
  padding: 0.76rem;
  align-self: start;
  position: sticky;
  top: 0.8rem;
  max-height: calc(100dvh - 1.6rem);
  overflow: hidden;
}

.dock-body {
  min-height: 0;
  overflow: auto;
  padding-right: 0.15rem;
}

.dock-tab {
  display: grid;
  gap: 0.62rem;
  align-content: start;
}

.help-trigger {
  width: 1.5rem;
  min-width: 1.5rem;
  height: 1.5rem;
  padding: 0;
  display: inline-grid;
  place-items: center;
  font-size: 0.8rem;
  font-weight: 700;
  border-radius: 999px;
}

.help-trigger.mini-help {
  position: relative;
  overflow: visible;
}

.help-trigger.mini-help::before,
.help-trigger.mini-help::after {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.16s ease, transform 0.16s ease;
}

.help-trigger.mini-help::before {
  content: "";
  position: absolute;
  bottom: calc(100% + 4px);
  left: 50%;
  transform: translateX(-50%) translateY(6px);
  border-width: 6px;
  border-style: solid;
  border-color: color-mix(in srgb, var(--heading), transparent 8%) transparent transparent transparent;
}

.help-trigger.mini-help::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: calc(100% + 10px);
  left: 50%;
  transform: translateX(-50%) translateY(6px);
  width: min(24rem, 78vw);
  border-radius: 10px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--heading), transparent 8%);
  color: color-mix(in srgb, var(--background), white 22%);
  padding: 0.42rem 0.56rem;
  font-size: 0.74rem;
  letter-spacing: 0.01em;
  line-height: 1.45;
  text-transform: none;
  white-space: normal;
  text-align: left;
  z-index: 8;
}

.help-trigger.mini-help:hover::before,
.help-trigger.mini-help:hover::after,
.help-trigger.mini-help:focus-visible::before,
.help-trigger.mini-help:focus-visible::after {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

.is-locked-control {
  opacity: 0.72;
}

.setup-summary-card {
  border-style: dashed;
}

.workspace-card p {
  margin: 0.2rem 0;
}

.workspace-card .card-actions {
  justify-content: flex-end;
}

.workflow-view-toggle {
  align-items: center;
}

.workflow-view-toggle .field-hint {
  flex: 1 1 260px;
}

.toggle-btn.is-active {
  background: var(--btn-primary-bg);
  color: var(--btn-primary-fg);
  border-color: transparent;
}

.workflow-view {
  display: grid;
  gap: 0.54rem;
}

.kanban-board {
  display: grid;
  grid-template-columns: repeat(5, minmax(170px, 1fr));
  gap: 0.54rem;
  overflow: auto hidden;
  padding-bottom: 0.2rem;
}

.kanban-column {
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--surface-1);
  padding: 0.52rem;
  min-height: 180px;
  transition: border-color 0.16s ease, box-shadow 0.16s ease, background 0.16s ease;
}

.kanban-column.is-drag-over {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent), transparent 70%);
  background: color-mix(in srgb, var(--surface-1), var(--accent) 8%);
}

.kanban-column h4 {
  margin: 0 0 0.45rem;
  font-family: "Manrope", sans-serif;
  font-size: 0.77rem;
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: var(--muted);
}

.kanban-card p {
  margin: 0.16rem 0;
}

.kanban-card {
  cursor: grab;
}

.kanban-card:active {
  cursor: grabbing;
}

.kanban-card.is-dragging {
  opacity: 0.55;
  border-style: dashed;
}

.workflow-list-wrap {
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--surface-1);
  overflow: auto;
}

.workflow-table {
  width: 100%;
  border-collapse: collapse;
  min-width: 860px;
}

.workflow-table th,
.workflow-table td {
  padding: 0.56rem 0.62rem;
  border-bottom: 1px solid var(--border);
  text-align: left;
  vertical-align: top;
}

.workflow-table th {
  font-size: 0.72rem;
  text-transform: uppercase;
  letter-spacing: 0.13em;
  color: var(--muted);
  background: var(--surface-2);
}

.workflow-table tr:last-child td {
  border-bottom: none;
}

.workflow-table td .pill {
  display: inline-flex;
}

.table-meta {
  font-size: 0.73rem;
  color: var(--muted);
  margin-top: 0.18rem;
}

.table-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.38rem;
  align-items: center;
}

.table-actions select {
  width: auto;
  min-width: 128px;
}

.mission-kpis {
  display: grid;
  gap: 0.54rem;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  margin-bottom: 0.5rem;
}

.mission-hud-grid {
  display: grid;
  gap: 0.54rem;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  margin-bottom: 0.52rem;
}

.progress-track {
  width: 100%;
  height: 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--surface-1);
}

.progress-fill {
  width: 0%;
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  transition: width 0.2s ease;
}

details summary {
  cursor: pointer;
  color: var(--heading);
  font-weight: 600;
}

.raw-details {
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--surface-1);
  padding: 0.44rem 0.56rem;
}

.raw-details summary {
  font-size: 0.76rem;
  letter-spacing: 0.11em;
  text-transform: uppercase;
  color: var(--muted);
}

.raw-details[open] summary {
  margin-bottom: 0.42rem;
}

.mobile-nav {
  display: none;
  gap: 0.42rem;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  padding: 0.5rem;
}

.mobile-nav button,
.mobile-nav a {
  border: 1px solid var(--border);
  background: var(--surface-1);
  color: var(--foreground);
  border-radius: 999px;
  text-align: center;
  padding: 0.36rem 0.44rem;
  text-decoration: none;
}

.is-hidden {
  display: none !important;
}

.app-footer {
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  background: var(--surface-1);
  padding: 0.6rem 0.8rem;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 0.5rem;
  font-size: 0.79rem;
  color: var(--muted);
}

.app-footer a {
  color: var(--foreground);
  text-decoration: none;
  margin-left: 0.64rem;
}

.app-footer a:first-child {
  margin-left: 0;
}

.help-dialog {
  border: none;
  background: transparent;
  padding: 0;
  width: min(28rem, calc(100vw - 1.5rem));
}

.help-dialog::backdrop {
  background: rgb(3 8 16 / 42%);
}

.help-dialog-card {
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  background: linear-gradient(145deg, var(--surface-1), var(--surface-2));
  box-shadow: var(--shadow-panel);
  padding: 1rem;
  display: grid;
  gap: 0.7rem;
}

.help-dialog-card header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.8rem;
}

@keyframes reveal-up {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto !important;
  }
}

@media (max-width: 1320px) {
  .command-grid {
    grid-template-columns: minmax(0, 1fr) minmax(310px, 0.78fr);
  }

  .global-hud-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

@media (max-width: 1120px) {
  .shell {
    width: calc(100vw - 1.1rem);
    padding-top: 0.7rem;
    min-height: auto;
  }

  .topbar {
    grid-template-columns: 1fr;
    grid-template-areas:
      "left"
      "center"
      "right"
      "hud";
  }

  .topbar-center,
  .topbar-right {
    justify-items: start;
    justify-content: flex-start;
  }

  .profile-select {
    min-width: 220px;
    width: min(100%, 360px);
  }

  .command-grid,
  .main-canvas {
    grid-template-columns: 1fr;
  }

  .main-canvas {
    overflow: visible;
    padding-right: 0;
  }

  .dock {
    position: static;
    top: auto;
    max-height: none;
  }

  .dock-body {
    overflow: visible;
  }

  .stepper-track {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

@media (max-width: 820px) {
  .shell {
    width: calc(100vw - 0.8rem);
    gap: 0.64rem;
  }

  .setup-stepper,
  .panel,
  .dock,
  .topbar {
    padding-inline: 0.74rem;
  }

  .stepper-track {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .global-hud-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .profile-chip {
    min-width: 150px;
  }

  .mission-kpis {
    grid-template-columns: 1fr;
  }

  .mission-hud-grid {
    grid-template-columns: 1fr;
  }

  .mobile-nav {
    display: grid;
  }
}
